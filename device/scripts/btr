#!/bin/sh
# Bismark traceroute wrapper
#
# author: walter.dedonato@unina.it

# Load configuration files
. ~/conf/dev.conf

# Help screen
[ $1 ] || { echo "usage: $(basename $0) <dst_ip>" ; exit ; }

case $DEVID in
NB*) traceroute -n -T -q1 $1 | awk '! /trace/{ print "<hop id="$1" ip="$2" rtt="$3" />" }' ;;
LS*) tcptraceroute -n -q1 $1 | awk '{ rtt=$3 } ; /\[.*\]/{ rtt=$4 } ; { print "<hop id="$1" ip="$2" rtt="rtt" />" }' ;;
esac
